<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Thrift API Gateway Core by aatarasoff</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Thrift API Gateway Core</h1>
      <h2 class="project-tagline"></h2>
      <a href="https://github.com/aatarasoff/thrift-api-gateway-core" class="btn">View on GitHub</a>
      <a href="https://github.com/aatarasoff/thrift-api-gateway-core/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/aatarasoff/thrift-api-gateway-core/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="thrift-api-gateway-core" class="anchor" href="#thrift-api-gateway-core" aria-hidden="true"><span class="octicon octicon-link"></span></a>Thrift API Gateway Core</h1>

<p>Sometimes you need to do gateway for your API.
This project provides core functionality for this.</p>

<h2>
<a id="what-is-it" class="anchor" href="#what-is-it" aria-hidden="true"><span class="octicon octicon-link"></span></a>What is it</h2>

<p>Imagine that you have a thrift service like this:</p>

<pre><code>service InternalTestService {
    SomeReturnData getSomeData(
        1: UserData userData,
        2: RequestData requestData
    ) throws (1: SomeException e);
}
</code></pre>

<p>So, you have some user data that identifies him, for example id.
But external client (mobile, web, other service) has only authentication token.
And you want to build gateway that would be proxy request and translate message into your internal service.</p>

<p>So, you need to publish to client other service: </p>

<pre><code>service ExternalTestService {
    SomeReturnData getSomeData(
        1: AuthToken authData,
        2: RequestData requestData
    ) throws (1: SomeException e, 99: UnauthorizedException ue);
}
</code></pre>

<p>As you see, difference beetween two services in the first argument and unauthorized exception as 99 field (I hope nobody needs more than 98 exceptions :) ).</p>

<p>MessageTranslator can get thrift message from external service and transform it into internal service message.</p>

<h2>
<a id="how-connect-project" class="anchor" href="#how-connect-project" aria-hidden="true"><span class="octicon octicon-link"></span></a>How connect project</h2>

<p>Its very simple:</p>

<pre><code>repositories {
    maven {
        url  "http://dl.bintray.com/aatarasoff/maven" 
    }
}
</code></pre>

<pre><code>compile 'ru.aatarasoff.thrift:api-gateway-core:0.2.1'
</code></pre>

<h2>
<a id="how-use-this" class="anchor" href="#how-use-this" aria-hidden="true"><span class="octicon octicon-link"></span></a>How use this</h2>

<p>You need to create MessageTransalator and call process method. 
Also you need implement AuthTokenExchanger interface.</p>

<p>Message Translator is not thread safe. Remember that.
If you have an exception while method process is called, you can process it with processError method.</p>

<p>See tests for better understanding.</p>

<h2>
<a id="enjoy" class="anchor" href="#enjoy" aria-hidden="true"><span class="octicon octicon-link"></span></a>Enjoy!</h2>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/aatarasoff/thrift-api-gateway-core">Thrift API Gateway Core</a> is maintained by <a href="https://github.com/aatarasoff">aatarasoff</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
