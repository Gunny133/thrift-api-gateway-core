{"name":"Thrift API Gateway Core","tagline":"","body":"# Thrift API Gateway Core\r\n\r\nSometimes you need to do gateway for your API.\r\nThis project provides core functionality for this.\r\n\r\n## What is it\r\n\r\nImagine that you have a thrift service like this:\r\n\r\n```\r\nservice InternalTestService {\r\n    SomeReturnData getSomeData(\r\n        1: UserData userData,\r\n        2: RequestData requestData\r\n    ) throws (1: SomeException e);\r\n}\r\n```\r\n\r\nSo, you have some user data that identifies him, for example id.\r\nBut external client (mobile, web, other service) has only authentication token.\r\nAnd you want to build gateway that would be proxy request and translate message into your internal service.\r\n\r\nSo, you need to publish to client other service: \r\n\r\n```\r\nservice ExternalTestService {\r\n    SomeReturnData getSomeData(\r\n        1: AuthToken authData,\r\n        2: RequestData requestData\r\n    ) throws (1: SomeException e, 99: UnauthorizedException ue);\r\n}\r\n```\r\n\r\nAs you see, difference beetween two services in the first argument and unauthorized exception as 99 field (I hope nobody needs more than 98 exceptions :) ).\r\n\r\nMessageTranslator can get thrift message from external service and transform it into internal service message.\r\n\r\n## How connect project\r\n\r\nIts very simple:\r\n\r\n```\r\nrepositories {\r\n    maven {\r\n        url  \"http://dl.bintray.com/aatarasoff/maven\" \r\n    }\r\n}\r\n```\r\n\r\n```\r\ncompile 'ru.aatarasoff.thrift:api-gateway-core:0.2.1'\r\n```\r\n\r\n## How use this\r\n\r\nYou need to create MessageTransalator and call process method. \r\nAlso you need implement AuthTokenExchanger interface.\r\n\r\nMessage Translator is not thread safe. Remember that.\r\nIf you have an exception while method process is called, you can process it with processError method.\r\n\r\nSee tests for better understanding.\r\n\r\n## Enjoy!","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}